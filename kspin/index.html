<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="kspin"><title>kspin - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-5d1d17d0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="kspin" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (9a1d156f3 2025-01-19)" data-channel="nightly" data-search-js="search-ccb196c1.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../kspin/index.html">kspin</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#kspin" title="kspin">kspin</a><ul><li><a href="#cargo-features" title="Cargo Features">Cargo Features</a></li><li><a href="#examples" title="Examples">Examples</a></li></ul></li></ul><h3><a href="#structs">Crate Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>kspin</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/kspin/lib.rs.html#1-36">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="kspin"><a class="doc-anchor" href="#kspin">§</a>kspin</h2>
<p><a href="https://crates.io/crates/kspin"><img src="https://img.shields.io/crates/v/kspin" alt="Crates.io" /></a>
<a href="https://docs.rs/kspin"><img src="https://docs.rs/kspin/badge.svg" alt="Docs.rs" /></a>
<a href="https://github.com/arceos-org/kspin/actions/workflows/ci.yml"><img src="https://github.com/arceos-org/kspin/actions/workflows/ci.yml/badge.svg?branch=main" alt="CI" /></a></p>
<p>Spinlocks used for kernel space that can disable preemption or IRQs in the
critical section.</p>
<h3 id="cargo-features"><a class="doc-anchor" href="#cargo-features">§</a>Cargo Features</h3>
<ul>
<li><code>smp</code>: Use in the <strong>multi-core</strong> environment. For <strong>single-core</strong> environment (without this feature), the lock state is unnecessary and optimized out. CPU can always get the lock if we follow the proper guard in use. By default, this feature is disabled.</li>
</ul>
<h3 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>kspin::{SpinNoIrq, SpinNoPreempt, SpinRaw};

<span class="kw">let </span>data = SpinRaw::new(());
<span class="kw">let </span><span class="kw-2">mut </span>guard = data.lock();
<span class="comment">/* critical section, does nothing while trying to lock. */
</span>drop(guard);

<span class="kw">let </span>data = SpinNoPreempt::new(());
<span class="kw">let </span><span class="kw-2">mut </span>guard = data.lock();
<span class="comment">/* critical section, preemption are disabled. */
</span>drop(guard);

<span class="kw">let </span>data = SpinNoIrq::new(());
<span class="kw">let </span><span class="kw-2">mut </span>guard = data.lock();
<span class="comment">/* critical section, both preemption and IRQs are disabled. */
</span>drop(guard);</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BaseSpinLock.html" title="struct kspin::BaseSpinLock">Base<wbr>Spin<wbr>Lock</a></dt><dd>A <a href="https://en.m.wikipedia.org/wiki/Spinlock">spin lock</a> providing mutually
exclusive access to data.</dd><dt><a class="struct" href="struct.BaseSpinLockGuard.html" title="struct kspin::BaseSpinLockGuard">Base<wbr>Spin<wbr>Lock<wbr>Guard</a></dt><dd>A guard that provides mutable data access.</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.SpinNoIrq.html" title="type kspin::SpinNoIrq">Spin<wbr>NoIrq</a></dt><dd>A spin lock that disables kernel preemption and local IRQs while trying to
lock, and re-enables it after unlocking.</dd><dt><a class="type" href="type.SpinNoIrqGuard.html" title="type kspin::SpinNoIrqGuard">Spin<wbr>NoIrq<wbr>Guard</a></dt><dd>A guard that provides mutable data access for <a href="type.SpinNoIrq.html" title="type kspin::SpinNoIrq"><code>SpinNoIrq</code></a>.</dd><dt><a class="type" href="type.SpinNoPreempt.html" title="type kspin::SpinNoPreempt">Spin<wbr>NoPreempt</a></dt><dd>A spin lock that disables kernel preemption while trying to lock, and
re-enables it after unlocking.</dd><dt><a class="type" href="type.SpinNoPreemptGuard.html" title="type kspin::SpinNoPreemptGuard">Spin<wbr>NoPreempt<wbr>Guard</a></dt><dd>A guard that provides mutable data access for <a href="type.SpinNoPreempt.html" title="type kspin::SpinNoPreempt"><code>SpinNoPreempt</code></a>.</dd><dt><a class="type" href="type.SpinRaw.html" title="type kspin::SpinRaw">SpinRaw</a></dt><dd>A raw spin lock that does nothing while trying to lock.</dd><dt><a class="type" href="type.SpinRawGuard.html" title="type kspin::SpinRawGuard">Spin<wbr>RawGuard</a></dt><dd>A guard that provides mutable data access for <a href="type.SpinRaw.html" title="type kspin::SpinRaw"><code>SpinRaw</code></a>.</dd></dl></section></div></main></body></html>